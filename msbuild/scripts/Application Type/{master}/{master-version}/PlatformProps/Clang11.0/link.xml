<?xml version="1.0" encoding="utf-8"?>

<!--
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  Based on Microsoft.Cpp\v4.0\1033\link.xml

  *This file is automatically generated. Local changes risk being overwritten by the export process.*

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->

<Rule
  Name="Link"
  PageTemplate="tool"
  DisplayName="Linker"
  Order="20"
  xmlns="http://schemas.microsoft.com/build/2009/properties"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:sys="clr-namespace:System;assembly=mscorlib">

  <Rule.Categories>
    <Category Name="General" DisplayName="General" />
    <Category Name="Input" DisplayName="Input" />
    <Category Name="Advanced" DisplayName="Advanced" />
    <Category Name="Command Line" DisplayName="Command Line" Subtype="CommandLine" />
  </Rule.Categories>

  <Rule.DataSource>
    <DataSource Persistence="ProjectFile" ItemType="Link" Label="" HasConfigurationCondition="true" />
  </Rule.DataSource>

  <!--
    OutputFile
  -->

  <StringProperty
    Subtype="file"
    Name="OutputFile"
    DisplayName="Output File"
    Category="General"
    Switch="-o"
    Separator=" "
  />

  <!--
    OutputSharedLibrary (Hidden)
  -->

  <BoolProperty
    Name="OutputSharedLibrary"
    DisplayName="Output Shared Library"
    Category="General"
    Switch="-shared"
    Visible="false"
  />

  <!--
    OutputSharedLibraryName
  -->

  <StringProperty
    Name="OutputSharedLibraryName"
    DisplayName="Shared Library Name"
    Description=""
    Category="General"
    Switch="-Wl,-soname"
    Separator=","
  />

  <!--
    LinkLibraryDependencies
  -->

  <BoolProperty
    Name="LinkLibraryDependencies"
    DisplayName="Link Library Dependencies"
    Description="Specifies whether or not library outputs from project dependencies are automatically linked in."
    Category="General"
    IncludeInCommandLine="false"
    F1Keyword="VC.Project.VCLibrarianTool.LinkLibraryDependencies">
    <BoolProperty.DataSource>
      <DataSource Persistence="ProjectFile" ItemType="ProjectReference" Label="" HasConfigurationCondition="true" />
    </BoolProperty.DataSource>
  </BoolProperty>

  <!--
    UseLibraryDependencyInputs
  -->

  <BoolProperty
    Name="UseLibraryDependencyInputs"
    DisplayName="Use Library Dependency Inputs"
    Description="Specifies whether or not the inputs to the librarian tool are used rather than the library file itself when linking in library outputs of project dependencies."
    Category="General"
    IncludeInCommandLine="false"
    F1Keyword="VC.Project.VCLinkerTool.UseLibraryDependencyInputs">
    <BoolProperty.DataSource>
      <DataSource Persistence="ProjectFile" ItemType="ProjectReference" Label="" HasConfigurationCondition="true" />
    </BoolProperty.DataSource>
  </BoolProperty>

  <!--
    SystemLibraryDirectories
  -->

  <StringListProperty
    Subtype="folder"
    Name="SystemLibraryDirectories"
    DisplayName="System Library Directories"
    Description="Add directory dir to the list of directories to be searched for -l.      (-L[dir])"
    Category="Advanced"
    Switch="-L"
  />

  <!--
    AdditionalLibraryDirectories
  -->

  <StringListProperty
    Subtype="folder"
    Name="AdditionalLibraryDirectories"
    DisplayName="Additional Library Directories"
    Description="Add directory dir to the list of directories to be searched for -l.      (-L[dir])"
    Category="Input"
    Switch="-L"
  />

  <!--
    SystemLibraryDependencies
  -->

  <StringListProperty
    Subtype="file"
    Name="SystemLibraryDependencies"
    DisplayName="System Library Dependencies"
    Category="Input"
    Switch="-l"
  />

  <!--
    AdditionalDependencies
  -->

  <StringListProperty
    Subtype="file"
    Name="AdditionalDependencies"
    DisplayName="Additional Dependencies"
    Category="Input"
  />

  <!--
    AdditionalOptions
  -->

  <StringProperty
    Name="AdditionalOptions"
    DisplayName="Additional Options"
    Description="Additional Options"
    Category="Command Line"
    F1Keyword="vc.project.AdditionalOptionsPage"
  />

  <!--
    StripUnusedSymbols
  -->

  <BoolProperty
    Name="StripUnusedSymbols"
    DisplayName="Strip Unused Symbols"
    Description="Remove all symbols that are not needed for relocation processing."
    Category="Advanced"
    IncludeInCommandLine="false"
  />

  <!--
    StripDebugSymbols
  -->

  <BoolProperty
    Name="StripDebugSymbols"
    DisplayName="Strip Debug Symbols"
    Description="Remove debugging symbols."
    Category="Advanced"
    IncludeInCommandLine="false"
  />

  <!--
    NoUndefinedSymbols
  -->

  <BoolProperty
    Name="NoUndefinedSymbols"
    DisplayName="No Undefined Symbols"
    Description="Show all undefined symbols as linker errors."
    Category="Advanced"
    Switch="-Wl,-undefined,error"
  />

  <!--
    AllowSharedLibraryUndefinedSymbols
  -->

  <BoolProperty
    Name="AllowSharedLibraryUndefinedSymbols"
    DisplayName="Allow Shared Library Undefined Symbols"
    Description="Allows (the default) or disallows undefined symbols in shared libraries. This switch is similar to --no-un-defined except that it determines the behaviour when the undefined symbols are in a shared library rather than a regular object file."
    Category="Advanced"
    Switch="-Wl,-undefined,dynamic_lookup"
  />

  <!--
    ExecutableStack
  -->

  <BoolProperty
    Name="ExecutableStack"
    DisplayName="Executable Stack"
    Description="Mark output as not requiring executable stack."
    Category="Advanced"
    Switch=""
    ReverseSwitch="-Wl,-z,noexecstack"
  />

  <!--
    ReadOnlyAfterRelocation
  -->

  <BoolProperty
    Name="ReadOnlyAfterRelocation"
    DisplayName="Read-Only After Relocation"
    Description="Where possible mark variables read-only after relocation."
    Category="Advanced"
    Switch="-Wl,-z,relro"
  />

  <!--
    ResolveSymbolsAtRuntime
  -->

  <BoolProperty
    Name="ResolveSymbolsAtRuntime"
    DisplayName="Resolve Symbols At Runtime"
    Description="Tells the dynamic linker to resolve symbols on program start instead of on first use."
    Category="Advanced"
    Switch="-Wl,-z,now"
  />

  <!--
    SysRoot
  -->

  <StringProperty
    Subtype="folder"
    Name="SysRoot"
    DisplayName="Common System Root (SysRoot)"
    Description="Use specified folder as the logical root directory for headers and libraries.     (--sysroot=[dir])"
    Category="Advanced"
    Switch="--sysroot"
    Separator="="
  />

  <!--
    PositionIndependentExecutable
  -->

  <EnumProperty
    Name="PositionIndependentExecutable"
    DisplayName="Generate Position-Independent Executable"
    Description="Generate position-independent code (PIC) suitable for use in executables."
    Category="Advanced">

    <EnumValue
      Name="SmallPie"
      Switch="-fpie"
    />

    <EnumValue
      Name="BigPie"
      Switch="-fPIE"
    />

    <EnumValue
      Name="Both"
      Switch="-fpie -fPIE"
      DisplayName="-fpie and -fPIE"
    />

  </EnumProperty>

  <!--
    RDynamic
  -->

  <BoolProperty
    Name="RDynamic"
    DisplayName="R-Dynamic"
    Description="This instructs the linker to add all symbols, not only used ones, to the dynamic symbol table. This option is needed for some uses of dlopen or to allow obtaining backtraces from within a program."
    Category="Advanced"
    Switch="-Wl,-export-dynamic"
  />

  <!--
    EmbedBuildId
  -->

  <BoolProperty
    Name="EmbedBuildId"
    DisplayName="Embed Build Id"
    Description="Request creation of .note.gnu.build-id ELF note section. The contents of the note are unique bits identifying this linked file."
    Category="Advanced"
    Switch="-Wl,-build-id"
  />


  <!--
    NoCanonicalPrefixes
  -->

  <BoolProperty
    Name="NoCanonicalPrefixes"
    DisplayName="No Canonical Prefixes"
    Description="Do not expand any symbolic links, resolve references to ‘/../’ or ‘/./’, or make the path absolute when generating a relative prefix."
    Category="Advanced"
    Switch="-no-canonical-prefixes"
  />

</Rule>

<!--
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
-->
