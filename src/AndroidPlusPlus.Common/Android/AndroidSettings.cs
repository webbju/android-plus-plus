////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Security;
using Microsoft.Win32;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

namespace AndroidPlusPlus.Common
{

  public partial class AndroidSettings
  {

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    private static string _sdkRoot;

    public static string SdkRoot
    {
      get
      {
        if (string.IsNullOrEmpty(_sdkRoot))
        {
          //
          // Probe for possible Android SDK installation directories.
          //

          var androidSdkPossibleLocations = new HashSet<string>();

          androidSdkPossibleLocations.Add(Environment.ExpandEnvironmentVariables("%LOCALAPPDATA%\\Android\\Sdk"));

          androidSdkPossibleLocations.Add(Environment.ExpandEnvironmentVariables("%ANDROID_SDK%"));

          androidSdkPossibleLocations.Add(Environment.ExpandEnvironmentVariables("%ANDROID_SDK_ROOT%"));

          androidSdkPossibleLocations.Add(Environment.ExpandEnvironmentVariables("%ANDROID_HOME%"));

          androidSdkPossibleLocations.RemoveWhere(path => !Directory.Exists(path));

          _sdkRoot = androidSdkPossibleLocations.First();
        }

        return _sdkRoot;
      }
      set => _sdkRoot = value;
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    private static string _ndkRoot;

    public static string NdkRoot
    {
      get
      {
        if (string.IsNullOrEmpty(_ndkRoot))
        {
          //
          // Probe for possible Android NDK installation directories.
          //

          var androidNdkPossibleLocations = new HashSet<string>();

          androidNdkPossibleLocations.Add(Environment.ExpandEnvironmentVariables("%ANDROID_NDK%"));

          androidNdkPossibleLocations.Add(Environment.ExpandEnvironmentVariables("%ANDROID_NDK_ROOT%"));

          androidNdkPossibleLocations.Add(Environment.ExpandEnvironmentVariables("%ANDROID_NDK_PATH%"));

          androidNdkPossibleLocations.RemoveWhere(path => !Directory.Exists(path));

          androidNdkPossibleLocations.RemoveWhere(path => File.Exists(Path.Combine(path, "ndk-build.cmd")));

          _ndkRoot = androidNdkPossibleLocations.First();
        }

        return _ndkRoot;
      }
      set => _ndkRoot = value;
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

  }

  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
  ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

}
